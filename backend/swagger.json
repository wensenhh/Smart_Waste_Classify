{
  "openapi": "3.0.3",
  "info": {
    "title": "智能垃圾分类系统 API",
    "description": "智能垃圾分类系统的后端API文档，提供用户管理、垃圾识别等功能。",
    "version": "1.0.0",
    "contact": {
      "name": "开发团队",
      "email": "team@example.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000/api",
      "description": "开发环境"
    },
    {
      "url": "https://api.example.com/api",
      "description": "生产环境"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "summary": "健康检查",
        "description": "检查服务器是否正常运行",
        "responses": {
          "200": {
            "description": "服务器正常运行",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "example": "ok"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "version": {
                          "type": "string",
                          "example": "1.0.0"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/welcome": {
      "get": {
        "summary": "欢迎信息",
        "description": "获取系统欢迎信息",
        "parameters": [
          {
            "name": "lang",
            "in": "query",
            "description": "语言偏好",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["zh", "en", "ja", "ko"],
              "default": "zh"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "欢迎信息",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "欢迎使用智能垃圾分类系统！"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/register": {
      "post": {
        "summary": "用户注册",
        "description": "创建新用户账号",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string",
                    "description": "用户名",
                    "example": "user123"
                  },
                  "email": {
                    "type": "string",
                    "description": "电子邮箱",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "description": "密码",
                    "example": "Password@123"
                  },
                  "nickname": {
                    "type": "string",
                    "description": "昵称",
                    "example": "用户昵称"
                  },
                  "phone": {
                    "type": "string",
                    "description": "手机号码",
                    "example": "13800138000"
                  }
                },
                "required": ["username", "email", "password"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "注册成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "1"
                        },
                        "username": {
                          "type": "string",
                          "example": "user123"
                        },
                        "email": {
                          "type": "string",
                          "example": "user@example.com"
                        },
                        "nickname": {
                          "type": "string",
                          "example": "用户昵称"
                        },
                        "phone": {
                          "type": "string",
                          "example": "13800138000"
                        },
                        "role": {
                          "type": "string",
                          "example": "user"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "注册失败",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string"
                    },
                    "errors": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/login": {
      "post": {
        "summary": "用户登录",
        "description": "用户登录获取访问令牌",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string",
                    "description": "用户名或邮箱",
                    "example": "user123"
                  },
                  "password": {
                    "type": "string",
                    "description": "密码",
                    "example": "Password@123"
                  }
                },
                "required": ["username", "password"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "登录成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "token": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        },
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "example": "1"
                            },
                            "username": {
                              "type": "string",
                              "example": "user123"
                            },
                            "email": {
                              "type": "string",
                              "example": "user@example.com"
                            },
                            "nickname": {
                              "type": "string",
                              "example": "用户昵称"
                            },
                            "role": {
                              "type": "string",
                              "example": "user"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "登录失败",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "用户名或密码错误"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/profile": {
      "get": {
        "summary": "获取用户资料",
        "description": "获取当前登录用户的个人资料",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "用户资料",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "1"
                        },
                        "username": {
                          "type": "string",
                          "example": "user123"
                        },
                        "email": {
                          "type": "string",
                          "example": "user@example.com"
                        },
                        "nickname": {
                          "type": "string",
                          "example": "用户昵称"
                        },
                        "phone": {
                          "type": "string",
                          "example": "13800138000"
                        },
                        "avatar": {
                          "type": "string",
                          "example": "/uploads/avatars/user123.jpg"
                        },
                        "role": {
                          "type": "string",
                          "example": "user"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "请先登录"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "更新用户资料",
        "description": "更新当前登录用户的个人资料",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nickname": {
                    "type": "string",
                    "description": "昵称",
                    "example": "新昵称"
                  },
                  "phone": {
                    "type": "string",
                    "description": "手机号码",
                    "example": "13900139000"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "1"
                        },
                        "username": {
                          "type": "string",
                          "example": "user123"
                        },
                        "email": {
                          "type": "string",
                          "example": "user@example.com"
                        },
                        "nickname": {
                          "type": "string",
                          "example": "新昵称"
                        },
                        "phone": {
                          "type": "string",
                          "example": "13900139000"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "更新失败",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string"
                    },
                    "errors": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "请先登录"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/avatar": {
      "post": {
        "summary": "上传用户头像",
        "description": "上传当前登录用户的头像图片",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "avatar": {
                    "type": "string",
                    "format": "binary",
                    "description": "头像图片文件"
                  }
                },
                "required": ["avatar"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "上传成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "avatarUrl": {
                          "type": "string",
                          "example": "/uploads/avatars/user123.jpg"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "上传失败",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "请先登录"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/password": {
      "put": {
        "summary": "修改密码",
        "description": "修改当前登录用户的密码",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "currentPassword": {
                    "type": "string",
                    "description": "当前密码",
                    "example": "Current@123"
                  },
                  "newPassword": {
                    "type": "string",
                    "description": "新密码",
                    "example": "NewPass@123"
                  },
                  "confirmPassword": {
                    "type": "string",
                    "description": "确认新密码",
                    "example": "NewPass@123"
                  }
                },
                "required": ["currentPassword", "newPassword", "confirmPassword"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "密码修改成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "密码修改成功，请重新登录"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "密码修改失败",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string"
                    },
                    "errors": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "请先登录"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/recognition/categories": {
      "get": {
        "summary": "获取垃圾类别列表",
        "description": "获取所有垃圾类别信息",
        "parameters": [
          {
            "name": "lang",
            "in": "query",
            "description": "语言偏好",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["zh", "en", "ja", "ko"],
              "default": "zh"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "垃圾类别列表",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "recyclable": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "example": "recyclable"
                            },
                            "name": {
                              "type": "string",
                              "example": "可回收物"
                            },
                            "color": {
                              "type": "string",
                              "example": "blue"
                            },
                            "description": {
                              "type": "string",
                              "example": "可回收物包括纸类、塑料、金属、玻璃、织物等"
                            },
                            "examples": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              },
                              "example": ["矿泉水瓶", "报纸", "铝合金罐", "玻璃瓶"]
                            }
                          }
                        },
                        "kitchen": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "example": "kitchen"
                            },
                            "name": {
                              "type": "string",
                              "example": "厨余垃圾"
                            },
                            "color": {
                              "type": "string",
                              "example": "green"
                            },
                            "description": {
                              "type": "string",
                              "example": "厨余垃圾包括剩菜剩饭、果皮、骨头等"
                            },
                            "examples": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              },
                              "example": ["果皮", "剩饭菜", "鱼骨头", "蔬菜叶子"]
                            }
                          }
                        },
                        "hazardous": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "example": "hazardous"
                            },
                            "name": {
                              "type": "string",
                              "example": "有害垃圾"
                            },
                            "color": {
                              "type": "string",
                              "example": "red"
                            },
                            "description": {
                              "type": "string",
                              "example": "有害垃圾包括废电池、废灯管、废药品、废油漆等"
                            },
                            "examples": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              },
                              "example": ["电池", "过期药品", "杀虫剂罐", "废灯管"]
                            }
                          }
                        },
                        "other": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "example": "other"
                            },
                            "name": {
                              "type": "string",
                              "example": "其他垃圾"
                            },
                            "color": {
                              "type": "string",
                              "example": "black"
                            },
                            "description": {
                              "type": "string",
                              "example": "其他垃圾包括砖瓦陶瓷、渣土、卫生间废纸等"
                            },
                            "examples": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              },
                              "example": ["陶瓷碎片", "纸巾", "烟蒂", "灰尘"]
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/recognition/search": {
      "get": {
        "summary": "搜索垃圾信息",
        "description": "根据关键词搜索垃圾信息",
        "parameters": [
          {
            "name": "keyword",
            "in": "query",
            "description": "搜索关键词",
            "required": true,
            "schema": {
              "type": "string",
              "example": "塑料瓶"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "example": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "每页数量",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "example": 10
            }
          },
          {
            "name": "lang",
            "in": "query",
            "description": "语言偏好",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["zh", "en", "ja", "ko"],
              "default": "zh"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "搜索结果",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "plastic-bottle"
                          },
                          "name": {
                            "type": "string",
                            "example": "塑料瓶"
                          },
                          "category": {
                            "type": "string",
                            "example": "recyclable"
                          },
                          "categoryName": {
                            "type": "string",
                            "example": "可回收物"
                          },
                          "description": {
                            "type": "string",
                            "example": "塑料瓶属于可回收物，请投入蓝色垃圾桶"
                          },
                          "tips": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            },
                            "example": ["请将瓶内液体倒净", "拧下瓶盖分开投放"]
                          },
                          "imageUrl": {
                            "type": "string",
                            "example": "/images/waste/plastic-bottle.jpg"
                          }
                        }
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "example": 1
                        },
                        "limit": {
                          "type": "integer",
                          "example": 10
                        },
                        "total": {
                          "type": "integer",
                          "example": 25
                        },
                        "pages": {
                          "type": "integer",
                          "example": 3
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "搜索失败",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/recognition/upload": {
      "post": {
        "summary": "上传垃圾图片进行识别",
        "description": "上传垃圾图片并获取识别结果",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "垃圾图片文件"
                  },
                  "saveHistory": {
                    "type": "boolean",
                    "description": "是否保存识别历史",
                    "example": true
                  }
                },
                "required": ["image"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "识别成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "category": {
                          "type": "string",
                          "example": "recyclable"
                        },
                        "categoryName": {
                          "type": "string",
                          "example": "可回收物"
                        },
                        "categoryColor": {
                          "type": "string",
                          "example": "blue"
                        },
                        "confidence": {
                          "type": "number",
                          "example": 0.95
                        },
                        "wasteName": {
                          "type": "string",
                          "example": "塑料瓶"
                        },
                        "description": {
                          "type": "string",
                          "example": "塑料瓶属于可回收物，请投入蓝色垃圾桶"
                        },
                        "tips": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "example": ["请将瓶内液体倒净", "拧下瓶盖分开投放"]
                        },
                        "imageUrl": {
                          "type": "string",
                          "example": "/uploads/recognition/2023/10/15/plastic-bottle-12345.jpg"
                        },
                        "historyId": {
                          "type": "string",
                          "example": "abc123"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "识别失败",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "请先登录"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/recognition/history": {
      "get": {
        "summary": "获取用户识别历史",
        "description": "获取当前登录用户的垃圾识别历史记录",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "example": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "每页数量",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "example": 10
            }
          },
          {
            "name": "category",
            "in": "query",
            "description": "按类别筛选",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["recyclable", "kitchen", "hazardous", "other"]
            }
          },
          {
            "name": "startDate",
            "in": "query",
            "description": "开始日期 (YYYY-MM-DD)",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date",
              "example": "2023-10-01"
            }
          },
          {
            "name": "endDate",
            "in": "query",
            "description": "结束日期 (YYYY-MM-DD)",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date",
              "example": "2023-10-31"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "识别历史记录",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "abc123"
                          },
                          "wasteName": {
                            "type": "string",
                            "example": "塑料瓶"
                          },
                          "category": {
                            "type": "string",
                            "example": "recyclable"
                          },
                          "categoryName": {
                            "type": "string",
                            "example": "可回收物"
                          },
                          "confidence": {
                            "type": "number",
                            "example": 0.95
                          },
                          "imageUrl": {
                            "type": "string",
                            "example": "/uploads/recognition/2023/10/15/plastic-bottle-12345.jpg"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-10-15T12:30:45Z"
                          }
                        }
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "example": 1
                        },
                        "limit": {
                          "type": "integer",
                          "example": 10
                        },
                        "total": {
                          "type": "integer",
                          "example": 56
                        },
                        "pages": {
                          "type": "integer",
                          "example": 6
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "请先登录"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/recognition/history/{id}": {
      "get": {
        "summary": "获取识别记录详情",
        "description": "获取指定ID的垃圾识别记录详情",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "识别记录ID",
            "required": true,
            "schema": {
              "type": "string",
              "example": "abc123"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "识别记录详情",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "abc123"
                        },
                        "wasteName": {
                          "type": "string",
                          "example": "塑料瓶"
                        },
                        "category": {
                          "type": "string",
                          "example": "recyclable"
                        },
                        "categoryName": {
                          "type": "string",
                          "example": "可回收物"
                        },
                        "categoryColor": {
                          "type": "string",
                          "example": "blue"
                        },
                        "confidence": {
                          "type": "number",
                          "example": 0.95
                        },
                        "description": {
                          "type": "string",
                          "example": "塑料瓶属于可回收物，请投入蓝色垃圾桶"
                        },
                        "tips": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "example": ["请将瓶内液体倒净", "拧下瓶盖分开投放"]
                        },
                        "imageUrl": {
                          "type": "string",
                          "example": "/uploads/recognition/2023/10/15/plastic-bottle-12345.jpg"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-10-15T12:30:45Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "记录不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "记录不存在"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "请先登录"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "删除识别记录",
        "description": "删除指定ID的垃圾识别记录",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "识别记录ID",
            "required": true,
            "schema": {
              "type": "string",
              "example": "abc123"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "删除成功"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "记录不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "记录不存在"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "请先登录"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/recognition/history/batch-delete": {
      "delete": {
        "summary": "批量删除识别记录",
        "description": "批量删除指定ID列表的垃圾识别记录",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "example": ["abc123", "def456", "ghi789"]
                  }
                },
                "required": ["ids"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "已成功删除3条记录"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "deletedCount": {
                          "type": "integer",
                          "example": 3
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "删除失败",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "请先登录"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/recognition/stats/categories": {
      "get": {
        "summary": "获取垃圾类别统计",
        "description": "获取当前登录用户的垃圾类别统计数据",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "startDate",
            "in": "query",
            "description": "开始日期 (YYYY-MM-DD)",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date",
              "example": "2023-10-01"
            }
          },
          {
            "name": "endDate",
            "in": "query",
            "description": "结束日期 (YYYY-MM-DD)",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date",
              "example": "2023-10-31"
            }
          },
          {
            "name": "lang",
            "in": "query",
            "description": "语言偏好",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["zh", "en", "ja", "ko"],
              "default": "zh"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "垃圾类别统计数据",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "integer",
                          "example": 125
                        },
                        "categories": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "category": {
                                "type": "string",
                                "example": "recyclable"
                              },
                              "name": {
                                "type": "string",
                                "example": "可回收物"
                              },
                              "color": {
                                "type": "string",
                                "example": "blue"
                              },
                              "count": {
                                "type": "integer",
                                "example": 45
                              },
                              "percentage": {
                                "type": "number",
                                "example": 36
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "请先登录"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}